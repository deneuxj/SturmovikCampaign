type LeadCanon {
	entity Canon
	trigger Hide
	trigger Show
	trigger Start
}

type Canon {
	entity Canon
}
Canon canon_in_group(LeadCanon, int)

type WhileEnemyClose from VirtualConvoy
LeadCanon lead_of_enemy_close(WhileEnemyClose)

// LeadCanon <-> Canon
columns += for (lead, pos, canon) in canon_in_group -> (canon.Canon, lead.Canon, pos)

// LeadCanon <-> WhileEnemyClose
object += for (lead, wec) in lead_of_enemy_close -> (wec.Proximity, lead.Canon)
target += for (lead, wec) in lead_of_enemy_close -> (wec.WakeUp, lead.Show)
target += for (lead, wec) in lead_of_enemy_close -> (wec.Sleep, lead.Hide)
target += for (lead, wec) in lead_of_enemy_close -> (lead.Start, wec.StartMonitoring)